<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escape Room: The Variance Vault</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;500;600;700&family=Exo+2:wght@400;500;600;700;800&family=Electrolize&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Welcome Screen -->
    <div id="welcome-screen" class="screen active">
        <div class="container">
            <div class="lock-animation">ğŸ”</div>
            <h1 class="title">Escape Room: The Variance Vault</h1>
            <p class="subtitle">You're trapped! Break the code with <span class="highlight-text">variance analysis</span></p>
            
            <!-- Top Button -->
            <div style="text-align: center; margin: 2rem 0;">
                <button class="primary-btn" onclick="startGame()">ğŸ”“ Escape the Vault</button>
            </div>
            
            <div class="intro-card">
                <h2>âš ï¸ Mission Brief</h2>
                <p>The vault's security system requires accurate variance calculations to unlock each chamber. One mistake and you'll have to start over. Use your knowledge of UK accounting standards and variance analysis formulas to escape!</p>
                
                <div class="room-list">
                    <li>ğŸ­ <strong>Materials Chamber</strong> - Calculate price and usage variances for British Manufacturing Ltd</li>
                    <li>ğŸ‘· <strong>Labour Chamber</strong> - Analyse rate and efficiency variances for Celtic Crafts Ltd</li>
                    <li>âš™ï¸ <strong>Overhead Chamber</strong> - Determine overhead variances for Yorkshire Engineering Ltd</li>
                    <li>ğŸ“Š <strong>Sales Chamber</strong> - Compute price and volume contribution variances for London Luxury Ltd</li>
                </div>
                
                <p style="margin-top: 20px; font-style: italic; color: var(--warning-orange);">ğŸ’¡ Tip: Each calculation must be correct to the penny and correctly classified as Adverse or Favourable!</p>
            </div>
            
            <button class="primary-btn" onclick="startGame()">ğŸ”“ Escape the Vault</button>
        </div>
    </div>

    <!-- Materials Room -->
    <div id="materials-room" class="screen">
        <div class="container">
            <div class="room-header">
                <h1>ğŸ­ Materials Room</h1>
                <div class="progress-bar">
                    <div class="progress" style="width: 25%"></div>
                </div>
                <p class="room-subtitle">Room 1 of 4</p>
            </div>
            
            <div class="scenario-card">
                <h2>Scenario</h2>
                <p>British Manufacturing Ltd produces widgets. You need to analyse the material variances for March 2025. The company uses aluminium sheets as their primary raw material.</p>
            </div>

            <div class="data-panel">
                <h3>Given Data</h3>
                <div class="data-grid">
                    <div class="data-item">
                        <span class="label">Standard Price per kg:</span>
                        <span class="value">Â£8.00</span>
                    </div>
                    <div class="data-item">
                        <span class="label">Actual Price per kg:</span>
                        <span class="value">Â£8.50</span>
                    </div>
                    <div class="data-item">
                        <span class="label">Standard Quantity for actual output:</span>
                        <span class="value">1,200 kg</span>
                    </div>
                    <div class="data-item">
                        <span class="label">Actual Quantity used:</span>
                        <span class="value">1,250 kg</span>
                    </div>
                </div>
            </div>

            <div class="calculation-panel">
                <h3>Calculate the Variances</h3>
                <div class="calculation-grid">
                    <div class="input-group">
                        <label for="material-price-variance">Material Price Variance (Â£):</label>
                        <input type="number" id="material-price-variance" placeholder="Enter amount" step="0.01">
                        <select id="material-price-variance-type">
                            <option value="">Select</option>
                            <option value="adverse">Adverse</option>
                            <option value="favourable">Favourable</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="material-usage-variance">Material Usage Variance (Â£):</label>
                        <input type="number" id="material-usage-variance" placeholder="Enter amount" step="0.01">
                        <select id="material-usage-variance-type">
                            <option value="">Select</option>
                            <option value="adverse">Adverse</option>
                            <option value="favourable">Favourable</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="total-material-variance">Total Material Variance (Â£):</label>
                        <input type="number" id="total-material-variance" placeholder="Enter amount" step="0.01">
                        <select id="total-material-variance-type">
                            <option value="">Select</option>
                            <option value="adverse">Adverse</option>
                            <option value="favourable">Favourable</option>
                        </select>
                    </div>
                    <div class="submit-section">
                        <button class="primary-btn" onclick="checkMaterialsRoom()">Submit Answers</button>
                    </div>
                </div>
                <div id="materials-feedback" class="feedback"></div>
            </div>
        </div>
    </div>

    <!-- Labour Room -->
    <div id="labour-room" class="screen">
        <div class="container">
            <div class="room-header">
                <h1>ğŸ‘· Labour Room</h1>
                <div class="progress-bar">
                    <div class="progress" style="width: 50%"></div>
                </div>
                <p class="room-subtitle">Room 2 of 4</p>
            </div>
            
            <div class="scenario-card">
                <h2>Scenario</h2>
                <p>Celtic Crafts Ltd employs skilled craftspeople to make traditional Scottish products. Analyse the labour variances for the production department in March 2025.</p>
            </div>

            <div class="data-panel">
                <h3>Given Data</h3>
                <div class="data-grid">
                    <div class="data-item">
                        <span class="label">Standard Rate per hour:</span>
                        <span class="value">Â£15.00</span>
                    </div>
                    <div class="data-item">
                        <span class="label">Actual Rate per hour:</span>
                        <span class="value">Â£14.20</span>
                    </div>
                    <div class="data-item">
                        <span class="label">Standard Hours for actual output:</span>
                        <span class="value">800 hours</span>
                    </div>
                    <div class="data-item">
                        <span class="label">Actual Hours worked:</span>
                        <span class="value">850 hours</span>
                    </div>
                </div>
            </div>

            <div class="calculation-panel">
                <h3>Calculate the Variances</h3>
                <div class="calculation-grid">
                    <div class="input-group">
                        <label for="labour-rate-variance">Labour Rate Variance (Â£):</label>
                        <input type="number" id="labour-rate-variance" placeholder="Enter amount" step="0.01">
                        <select id="labour-rate-variance-type">
                            <option value="">Select</option>
                            <option value="adverse">Adverse</option>
                            <option value="favourable">Favourable</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="labour-efficiency-variance">Labour Efficiency Variance (Â£):</label>
                        <input type="number" id="labour-efficiency-variance" placeholder="Enter amount" step="0.01">
                        <select id="labour-efficiency-variance-type">
                            <option value="">Select</option>
                            <option value="adverse">Adverse</option>
                            <option value="favourable">Favourable</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="total-labour-variance">Total Labour Variance (Â£):</label>
                        <input type="number" id="total-labour-variance" placeholder="Enter amount" step="0.01">
                        <select id="total-labour-variance-type">
                            <option value="">Select</option>
                            <option value="adverse">Adverse</option>
                            <option value="favourable">Favourable</option>
                        </select>
                    </div>
                    <div class="submit-section">
                        <button class="primary-btn" onclick="checkLabourRoom()">Submit Answers</button>
                    </div>
                </div>
                <div id="labour-feedback" class="feedback"></div>
            </div>
        </div>
    </div>

    <!-- Overhead Room -->
    <div id="overhead-room" class="screen">
        <div class="container">
            <div class="room-header">
                <h1>âš™ï¸ Overhead Room</h1>
                <div class="progress-bar">
                    <div class="progress" style="width: 75%"></div>
                </div>
                <p class="room-subtitle">Room 3 of 4</p>
            </div>
            
            <div class="scenario-card">
                <h2>Scenario</h2>
                <p>Yorkshire Engineering Ltd operates a machine shop. Analyse the overhead variances for March 2025. The company absorbs overheads based on machine hours.</p>
            </div>

            <div class="data-panel">
                <h3>Given Data</h3>
                <div class="data-grid">
                    <div class="data-item">
                        <span class="label">Budgeted Fixed Overhead:</span>
                        <span class="value">Â£24,000</span>
                    </div>
                    <div class="data-item">
                        <span class="label">Actual Fixed Overhead:</span>
                        <span class="value">Â£25,200</span>
                    </div>
                    <div class="data-item">
                        <span class="label">Budgeted Machine Hours:</span>
                        <span class="value">2,000 hours</span>
                    </div>
                    <div class="data-item">
                        <span class="label">Standard Hours for actual output:</span>
                        <span class="value">1,900 hours</span>
                    </div>
                    <div class="data-item">
                        <span class="label">Variable Overhead Rate per hour:</span>
                        <span class="value">Â£6.00</span>
                    </div>
                    <div class="data-item">
                        <span class="label">Actual Variable Overhead:</span>
                        <span class="value">Â£11,780</span>
                    </div>
                </div>
            </div>

            <div class="calculation-panel">
                <h3>Calculate the Variances</h3>
                <div class="calculation-grid">
                    <div class="input-group">
                        <label for="variable-overhead-variance">Variable Overhead Variance (Â£):</label>
                        <input type="number" id="variable-overhead-variance" placeholder="Enter amount" step="0.01">
                        <select id="variable-overhead-variance-type">
                            <option value="">Select</option>
                            <option value="adverse">Adverse</option>
                            <option value="favourable">Favourable</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="fixed-overhead-variance">Fixed Overhead Volume Variance (Â£):</label>
                        <input type="number" id="fixed-overhead-variance" placeholder="Enter amount" step="0.01">
                        <select id="fixed-overhead-variance-type">
                            <option value="">Select</option>
                            <option value="adverse">Adverse</option>
                            <option value="favourable">Favourable</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="total-overhead-variance">Total Overhead Variance (Â£):</label>
                        <input type="number" id="total-overhead-variance" placeholder="Enter amount" step="0.01">
                        <select id="total-overhead-variance-type">
                            <option value="">Select</option>
                            <option value="adverse">Adverse</option>
                            <option value="favourable">Favourable</option>
                        </select>
                    </div>
                    <div class="submit-section">
                        <button class="primary-btn" onclick="checkOverheadRoom()">Submit Answers</button>
                    </div>
                </div>
                <div id="overhead-feedback" class="feedback"></div>
            </div>
        </div>
    </div>

    <!-- Sales Room -->
    <div id="sales-room" class="screen">
        <div class="container">
            <div class="room-header">
                <h1>ğŸ“Š Sales Room</h1>
                <div class="progress-bar">
                    <div class="progress" style="width: 100%"></div>
                </div>
                <p class="room-subtitle">Room 4 of 4</p>
            </div>
            
            <div class="scenario-card">
                <h2>Scenario</h2>
                <p>London Luxury Ltd sells premium handbags. Analyse the sales variances for March 2025 to understand performance against budget.</p>
            </div>

            <div class="data-panel">
                <h3>Given Data</h3>
                <div class="data-grid">
                    <div class="data-item">
                        <span class="label">Budgeted Selling Price per unit:</span>
                        <span class="value">Â£120.00</span>
                    </div>
                    <div class="data-item">
                        <span class="label">Actual Selling Price per unit:</span>
                        <span class="value">Â£115.00</span>
                    </div>
                    <div class="data-item">
                        <span class="label">Budgeted Sales Volume:</span>
                        <span class="value">500 units</span>
                    </div>
                    <div class="data-item">
                        <span class="label">Actual Sales Volume:</span>
                        <span class="value">520 units</span>
                    </div>
                    <div class="data-item">
                        <span class="label">Standard Contribution per unit:</span>
                        <span class="value">Â£45.00</span>
                    </div>
                </div>
            </div>

            <div class="calculation-panel">
                <h3>Calculate the Variances</h3>
                <div class="calculation-grid">
                    <div class="input-group">
                        <label for="sales-price-variance">Sales Price Variance (Â£):</label>
                        <input type="number" id="sales-price-variance" placeholder="Enter amount" step="0.01">
                        <select id="sales-price-variance-type">
                            <option value="">Select</option>
                            <option value="adverse">Adverse</option>
                            <option value="favourable">Favourable</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="sales-volume-variance">Sales Volume Contribution Variance (Â£):</label>
                        <input type="number" id="sales-volume-variance" placeholder="Enter amount" step="0.01">
                        <select id="sales-volume-variance-type">
                            <option value="">Select</option>
                            <option value="adverse">Adverse</option>
                            <option value="favourable">Favourable</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="total-sales-variance">Total Sales Variance (Â£):</label>
                        <input type="number" id="total-sales-variance" placeholder="Enter amount" step="0.01">
                        <select id="total-sales-variance-type">
                            <option value="">Select</option>
                            <option value="adverse">Adverse</option>
                            <option value="favourable">Favourable</option>
                        </select>
                    </div>
                    <div class="submit-section">
                        <button class="primary-btn" onclick="checkSalesRoom()">Submit Answers</button>
                    </div>
                </div>
                <div id="sales-feedback" class="feedback"></div>
            </div>
        </div>
    </div>

    <!-- Completion Screen -->
    <div id="completion-screen" class="screen">
        <div class="container">
            <h1 class="title">ğŸ‰ Congratulations!</h1>
            <p class="subtitle">You've successfully escaped the Variance Vault!</p>
            
            <div class="summary-card">
                <h2>Variance Analysis Summary</h2>
                <div class="summary-section">
                    <h3>ğŸ­ Materials Room</h3>
                    <p><strong>Material Price Variance:</strong> Â£625.00 Adverse</p>
                    <p><strong>Material Usage Variance:</strong> Â£400.00 Adverse</p>
                    <p><strong>Total Material Variance:</strong> Â£1,025.00 Adverse</p>
                </div>
                <div class="summary-section">
                    <h3>ğŸ‘· Labour Room</h3>
                    <p><strong>Labour Rate Variance:</strong> Â£680.00 Favourable</p>
                    <p><strong>Labour Efficiency Variance:</strong> Â£750.00 Adverse</p>
                    <p><strong>Total Labour Variance:</strong> Â£70.00 Adverse</p>
                </div>
                <div class="summary-section">
                    <h3>âš™ï¸ Overhead Room</h3>
                    <p><strong>Variable Overhead Variance:</strong> Â£380.00 Adverse</p>
                    <p><strong>Fixed Overhead Volume Variance:</strong> Â£1,200.00 Adverse</p>
                    <p><strong>Total Overhead Variance:</strong> Â£1,580.00 Adverse</p>
                </div>
                <div class="summary-section">
                    <h3>ğŸ“Š Sales Room</h3>
                    <p><strong>Sales Price Variance:</strong> Â£2,600.00 Adverse</p>
                    <p><strong>Sales Volume Contribution Variance:</strong> Â£900.00 Favourable</p>
                    <p><strong>Total Sales Variance:</strong> Â£1,700.00 Adverse</p>
                </div>
            </div>
            
            <div class="completion-actions">
                <button class="primary-btn" onclick="restartGame()">Play Again</button>
                <button class="secondary-btn" onclick="showFormulas()">View Formulas</button>
            </div>
        </div>
    </div>

    <!-- Formula Reference -->
    <div id="formula-screen" class="screen">
        <div class="container">
            <h1>ğŸ“š Variance Analysis Formulas</h1>
            <div class="formula-card">
                <h2>Materials Variances</h2>
                <p><strong>Material Price Variance:</strong> (Actual Price - Standard Price) Ã— Actual Quantity</p>
                <p><strong>Material Usage Variance:</strong> (Actual Quantity - Standard Quantity) Ã— Standard Price</p>
            </div>
            <div class="formula-card">
                <h2>Labour Variances</h2>
                <p><strong>Labour Rate Variance:</strong> (Actual Rate - Standard Rate) Ã— Actual Hours</p>
                <p><strong>Labour Efficiency Variance:</strong> (Actual Hours - Standard Hours) Ã— Standard Rate</p>
            </div>
            <div class="formula-card">
                <h2>Overhead Variances</h2>
                <p><strong>Variable Overhead Variance:</strong> Actual Variable Overhead - (Standard Hours Ã— Variable Rate)</p>
                <p><strong>Fixed Overhead Volume Variance:</strong> (Standard Hours - Budgeted Hours) Ã— Fixed Rate per Hour</p>
            </div>
            <div class="formula-card">
                <h2>Sales Variances</h2>
                <p><strong>Sales Price Variance:</strong> (Actual Price - Standard Price) Ã— Actual Volume</p>
                <p><strong>Sales Volume Contribution Variance:</strong> (Actual Volume - Budgeted Volume) Ã— Standard Contribution</p>
            </div>
            <button class="secondary-btn" onclick="hideFormulas()">Back to Summary</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>